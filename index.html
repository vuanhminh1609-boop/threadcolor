<!DOCTYPE html>
<html lang="vi" data-world="origami">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>8Portal v4</title>
  <link rel="stylesheet" href="assets/dist/tailwind.css">
  <link rel="stylesheet" href="./assets/tones.css">
  <link rel="stylesheet" href="./assets/topbar_overrides.css">
  <style>
    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .tc-topbar {
      background: var(--glass);
      border-bottom: 1px solid var(--stroke);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
      position: sticky;
      top: 0;
      z-index: var(--z-topbar, 2000) !important;
      overflow: visible;
    }
    .tc-topbar::after{
      content:"";
      position:absolute; left:0; right:0; bottom:-1px; height:1px;
      background: linear-gradient(90deg, var(--a1), var(--a2), var(--a3));
      opacity: .35;
    }
    #portalMenu,
    #worldMenu{
      z-index: var(--z-topbar-menu, 4000) !important;
    }
    .tc-brand {
      font-weight: 700;
      letter-spacing: -0.01em;
      color: var(--text);
      text-shadow: 0 1px 0 rgba(255,255,255,.15);
    }
    .tc-chip{
      background: var(--glass);
      border: 1px solid var(--stroke);
      color: var(--text);
    }
    .tc-chip:hover{ filter: brightness(1.03); }
    .tc-btn{
      border-radius: 0.75rem;
      border: 1px solid var(--stroke);
      background: var(--glass);
      color: var(--text);
      font-weight: 650;
      letter-spacing: -0.005em;
      line-height: 1;
      transition: filter .15s ease, transform .05s ease, box-shadow .15s ease;
    }
    .tc-btn:hover{ filter: brightness(1.03); }
    .tc-btn:active{ transform: translateY(1px); }
    .tc-btn:focus-visible{
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,0,0,.12), 0 0 0 6px var(--a1);
    }
    .tc-btn-primary{
      background: linear-gradient(135deg, var(--a1), var(--a2));
      color: #fff;
      border: 1px solid rgba(255,255,255,.18);
    }
    .tc-btn-primary:hover{ filter: brightness(1.06); }
    .tc-dot{
      width: 10px; height: 10px; border-radius: 999px;
      background: linear-gradient(135deg, var(--a1), var(--a2), var(--a3));
      box-shadow: 0 0 0 2px rgba(255,255,255,.5);
    }
    .tc-muted{ color: var(--muted); }
    .tc-card{
      background: var(--glass);
      border: 1px solid var(--stroke);
      border-radius: 1rem;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.12);
    }
    .tc-input{
      background: var(--glass);
      border: 1px solid var(--stroke);
      border-radius: 0.75rem;
      padding: 0.55rem 0.75rem;
      color: var(--text);
    }
    .tc-color-input{
      background: var(--glass);
      border: 1px solid var(--stroke);
      border-radius: 0.75rem;
      width: 3rem;
      height: 2.25rem;
      padding: 0.15rem;
    }
    .tc-preview-swatch{
      width: 3rem;
      height: 3rem;
      border-radius: 0.9rem;
      border: 1px solid var(--stroke);
      background: var(--glass);
    }
    .tc-gradient-preview{
      border-radius: 0.9rem;
      border: 1px solid var(--stroke);
      background: linear-gradient(135deg, var(--a1), var(--a2), var(--a3));
      height: 70px;
    }
    .tc-toast{
      position: fixed;
      right: 20px;
      bottom: 20px;
      z-index: 80;
      background: var(--glass);
      border: 1px solid var(--stroke);
      color: var(--text);
      border-radius: 0.9rem;
      padding: 0.6rem 0.9rem;
      box-shadow: 0 16px 40px rgba(0,0,0,.18);
      opacity: 0;
      transform: translateY(6px);
      pointer-events: none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .tc-toast.is-visible{
      opacity: 1;
      transform: translateY(0);
    }
    [data-world-card="1"]{
      cursor: pointer;
      transition: transform .12s ease, box-shadow .18s ease, filter .18s ease;
    }
    [data-world-card="1"]:hover{
      transform: translateY(-1px);
      box-shadow: 0 18px 50px rgba(0,0,0,.16);
      filter: brightness(1.02);
    }
    [data-world-card="1"]:active{
      transform: translateY(1px);
    }
    [data-world-card="1"]:focus-visible{
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,0,0,.12), 0 0 0 6px var(--a1), 0 18px 50px rgba(0,0,0,.16);
    }
    #worldMenu[data-open="0"] { display: none; }
    #worldMenu[data-open="1"] { display: block; }
    #worldMenu .tc-world-item{
      color: var(--text);
      transition: background-color .15s ease;
    }
    #worldMenu .tc-world-item:hover{ background: rgba(255,255,255,.10); }
    #worldMenu .tc-world-item:focus-visible{
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,0,0,.12), 0 0 0 6px var(--a1);
      border-radius: 0.6rem;
      background: rgba(255,255,255,.08);
    }
    .tc-menu[data-open="0"] { display: none; }
    .tc-menu[data-open="1"] { display: block; }
    .tc-menu{
      background: var(--glass);
      border: 1px solid var(--stroke);
      color: var(--text);
    }
    .tc-menu-item{
      color: var(--text);
      transition: background-color .15s ease, transform .05s ease;
    }
    .tc-menu-item:hover{ background: rgba(255,255,255,.10); }
    .tc-menu-item:active{ transform: translateY(1px); }
    .tc-menu-item:focus-visible{
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,0,0,.12), 0 0 0 6px var(--a1);
      border-radius: 0.6rem;
      background: rgba(255,255,255,.08);
    }
    @media (prefers-reduced-motion: reduce){
      .tc-btn,
      #worldMenu .tc-world-item,
      .tc-menu-item{
        transition: none;
      }
      [data-world-card="1"]{
        transition: none;
      }
      [data-world-card="1"]:hover,
      [data-world-card="1"]:active{
        transform: none;
      }
      .tc-toast{
        transition: none;
        transform: none;
      }
        .tc-toast.is-visible{
          transform: none;
        }
      }
      @media (max-width: 520px) {
        .tc-topbar > .max-w-6xl {
          flex-wrap: wrap;
          row-gap: 8px;
          column-gap: 8px;
        }
        .tc-topbar > .max-w-6xl > :nth-child(1) {
          order: 1;
          min-width: 0;
        }
        .tc-topbar > .max-w-6xl > :nth-child(2) {
          order: 3;
          flex: 1 1 100%;
          min-width: 0;
        }
        .tc-topbar > .max-w-6xl > :nth-child(3) {
          order: 2;
          margin-left: auto;
        }
        .tc-topbar #portalSwitcher,
        .tc-topbar #portalBtn {
          width: 100%;
          max-width: 100%;
        }
        .tc-topbar [data-i18n="topbar.slogan"] {
          display: none;
        }
        .tc-topbar .tc-brand {
          max-width: 160px;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        #topbarAuthSlot #userName {
          display: none;
        }
        .tc-topbar a,
        .tc-topbar button {
          min-height: 40px;
        }
      }
    </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html, body, button, input, select, textarea {
      font-family: "Inter", "Noto Sans", system-ui, -apple-system, "Segoe UI", sans-serif;
    }
  </style></head>
<body class="font-sans">
  <!-- TOPBAR -->
      <div id="tcTopbarMount"></div>



  <main>
    <!-- HERO -->
    <section class="max-w-6xl mx-auto px-4 pt-14 pb-12">
      <div class="tc-card p-8 md:p-10">
        <p class="text-xs uppercase tracking-[0.3em] tc-muted">Sảnh điều phối</p>
        <h1 class="text-4xl md:text-5xl font-bold mt-3" data-i18n="hero.title">Không gian màu vô hạn.</h1>
        <p class="mt-4 tc-muted max-w-2xl whitespace-pre-line" data-i18n="hero.desc">8 Thế giới màu đã sẵn sàng — mỗi Thế giới là một không gian màu sắc chuyên biệt — tạo, chuyển đổi, chuẩn hoá, lưu và áp dụng màu theo nhu cầu của bạn, và nhiều hơn thế nữa...
Từ Hex/ảnh → tra mã chỉ → bảng phối (Palette) → dải chuyển (Gradient) → màu in (CMYK) → Chia sẻ + Remix
Khám phá 8 Thế giới ở thanh “Chọn Thế giới” hoặc lướt xuống để xem sơ đồ 8 cổng — chọn 1 cổng để bước vào Thế giới bạn cần.</p>
        <a class="mt-3 inline-flex items-center gap-2 text-sm font-semibold tc-muted hover:text-white" href="#portalHub" data-i18n="hero.ctaJump">Đi đến 8 cổng ngay</a>
        <div class="mt-6 flex flex-wrap gap-3">
          <a class="tc-btn tc-btn-primary px-5 py-3" href="./worlds/library.html" data-i18n="hero.ctaPrimary">Bắt đầu với Thư viện màu</a>
          <a class="tc-btn tc-chip px-5 py-3" href="./worlds/threadcolor.html" data-i18n="hero.ctaSecondary">Mở công cụ tra mã chỉ</a>
        </div>
      </div>
    </section>

    <!-- PORTAL HUB -->
    <section class="max-w-6xl mx-auto px-4 pb-12" id="portalHub">
      <div class="flex items-end justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold">8 Cổng SpaceColors</h2>
          <p class="tc-muted text-sm mt-1">Chọn cổng để bước vào một Thế giới sắc màu khác.</p>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold">Thế giới màu thêu (Embroidery)</h3>
            <p class="tc-muted text-sm mt-2">Tra mã chỉ từ ảnh/HEX, so màu gần nhất, quản lý kho chỉ và đặt mua.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/threadcolor.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold">Thế giới Dải chuyển màu (Gradient)</h3>
            <p class="tc-muted text-sm mt-2">Tạo dải chuyển màu, chỉnh góc & điểm neo, xuất CSS/Token nhanh.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/gradient.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold">Thế giới Bảng phối màu (Palette)</h3>
            <p class="tc-muted text-sm mt-2">Khám phá phối màu theo cảm xúc, lưu bộ sưu tập, xuất token/HEX.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/palette.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold">Thế giới Màu in (CMYK)</h3>
            <p class="tc-muted text-sm mt-2">Đổi HEX → CMYK, theo dõi TAC, cảnh báo lệch in và xuất bảng cho nhà in.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/printcolor.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold mt-3">Thế giới Thư viện Tài sản Màu</h3>
            <p class="tc-muted text-sm mt-2">Lưu tài sản màu, lọc nhanh, xem nhanh và áp dụng sang Palette/Gradient.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/library.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold mt-3">Thế giới màu Sơn&Vải</h3>
            <p class="tc-muted text-sm mt-2">Mô phỏng màu trên sơn/vải, điều chỉnh ánh sáng, lưu tài sản vật liệu.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/paintfabric.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold mt-3">Thế giới Màu từ Ảnh</h3>
            <p class="tc-muted text-sm mt-2">Lấy màu chủ đạo từ ảnh, tạo palette/gradient và lưu nhanh.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/imagecolor.html">Mở</a>
        </div>
        <div class="tc-card p-5 flex flex-col gap-4 h-full">
          <div class="flex-1">
            <h3 class="font-semibold mt-3">Thế giới Chia sẻ + Remix</h3>
            <p class="tc-muted text-sm mt-2">Chia sẻ tài sản màu, remix về Thư viện và khám phá cộng đồng.</p>
          </div>
          <a class="tc-btn tc-btn-primary px-4 py-2 inline-flex w-full sm:w-max mt-auto self-start" href="./worlds/community.html">Mở</a>
        </div>
      </div>
    </section>

    <!-- QUICK ACTIONS -->
    <section class="max-w-6xl mx-auto px-4 pb-12" id="portalHub">
      <div class="flex items-end justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold">Trạm thao tác nhanh</h2>
          <p class="tc-muted text-sm mt-1">Làm nhanh ngay tại sảnh, sau đó mới mở chi tiết.</p>
        </div>
      </div>
      <div class="tc-card p-6 md:p-8">
        <div class="flex gap-2 overflow-x-auto pb-2" id="quickTabs" role="tablist">
          <button class="tc-btn tc-chip px-4 py-2 text-sm whitespace-nowrap" data-tab="paste" role="tab" aria-selected="true">Dán màu</button>
          <button class="tc-btn tc-chip px-4 py-2 text-sm whitespace-nowrap" data-tab="thread" role="tab" aria-selected="false">Tra mã chỉ từ màu</button>
          <button class="tc-btn tc-chip px-4 py-2 text-sm whitespace-nowrap" data-tab="image" role="tab" aria-selected="false">Tra mã chỉ từ ảnh</button>
        </div>

        <div class="mt-5 space-y-6" id="quickPanels">
          <div data-panel="paste" role="tabpanel">
            <label class="text-sm font-semibold" for="qaPasteInput">Danh sách HEX</label>
            <textarea id="qaPasteInput" class="tc-input mt-2" placeholder="#FFAA00, #123456
#0F766E"></textarea>
            <div class="mt-3 flex flex-wrap gap-2">
              <button id="qaPasteApply" class="tc-btn tc-btn-primary px-4 py-2 text-sm" type="button">Áp dụng</button>
            </div>
            <div id="qaPasteSwatches" class="mt-4 flex flex-wrap gap-2"></div>

            <div class="mt-5 grid gap-4 lg:grid-cols-3">
              <div class="tc-card p-4">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold">Đổi CMYK ngay</h3>
                  <button id="qaPasteCmyk" class="tc-btn tc-chip px-3 py-1 text-xs" type="button">Thực hiện</button>
                </div>
                <div id="qaPasteCmykOut" class="mt-3 text-xs tc-muted"></div>
                <a id="qaOpenCmyk" class="tc-btn tc-btn-primary px-3 py-2 text-xs mt-3 inline-flex hidden" href="./worlds/printcolor.html">Mở chi tiết</a>
              </div>
              <div class="tc-card p-4">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold">Tạo dải ngay</h3>
                  <button id="qaPasteGradient" class="tc-btn tc-chip px-3 py-1 text-xs" type="button">Thực hiện</button>
                </div>
                <div id="qaPasteGradientOut" class="mt-3 h-12 rounded-lg border border-[rgba(0,0,0,.12)]"></div>
                <a id="qaOpenGradient" class="tc-btn tc-btn-primary px-3 py-2 text-xs mt-3 inline-flex hidden" href="./worlds/gradient.html">Mở chi tiết</a>
              </div>
              <div class="tc-card p-4">
                <div class="flex items-center justify-between">
                  <h3 class="text-sm font-semibold">Xuất token ngay</h3>
                  <button id="qaPasteExport" class="tc-btn tc-chip px-3 py-1 text-xs" type="button">Thực hiện</button>
                </div>
                <pre id="qaPasteExportOut" class="mt-3 text-[11px] tc-muted whitespace-pre-wrap"></pre>
                <button id="qaPasteCopy" class="tc-btn tc-chip px-3 py-2 text-xs mt-2 hidden" type="button">Sao chép</button>
                <a id="qaOpenPalette" class="tc-btn tc-btn-primary px-3 py-2 text-xs mt-2 inline-flex hidden" href="./worlds/palette.html">Mở chi tiết</a>
              </div>
            </div>
          </div>

          <div data-panel="thread" role="tabpanel" class="hidden">
            <label class="text-sm font-semibold" for="qaThreadHex">Nhập HEX</label>
            <div class="mt-2 flex flex-wrap gap-2 items-center">
              <input id="qaThreadHex" class="tc-input w-[180px]" placeholder="#FFAA00">
              <button id="qaThreadSearch" class="tc-btn tc-btn-primary px-4 py-2 text-sm" type="button">Tra ngay</button>
            </div>
            <ul id="qaThreadList" class="mt-4 space-y-2 text-sm"></ul>
            <a id="qaThreadOpen" class="tc-btn tc-btn-primary px-3 py-2 text-xs mt-3 inline-flex hidden" href="./worlds/threadcolor.html">Mở chi tiết (Embroidery)</a>
          </div>

          <div data-panel="image" role="tabpanel" class="hidden">
            <label class="text-sm font-semibold">Chọn ảnh</label>
            <div class="mt-2 flex flex-wrap gap-2 items-center">
              <label class="tc-btn tc-chip px-4 py-2 text-sm" for="qaImageInput">Chọn ảnh</label>
              <input id="qaImageInput" type="file" accept="image/*" class="sr-only">
              <button id="qaImageAnalyze" class="tc-btn tc-btn-primary px-4 py-2 text-sm" type="button">Phân tích</button>
            </div>
            <div id="qaImageSwatches" class="mt-4 flex flex-wrap gap-2"></div>
            <ul id="qaImageThreads" class="mt-4 space-y-2 text-sm"></ul>
            <a id="qaImageOpen" class="tc-btn tc-btn-primary px-3 py-2 text-xs mt-3 inline-flex hidden" href="./worlds/threadcolor.html">Mở chi tiết (Embroidery)</a>
          </div>
        </div>
      </div>
    </section>

    <!-- ROULETTE -->
    <section class="max-w-6xl mx-auto px-4 pb-12" id="portalHub">
      <div class="flex items-end justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold" data-i18n="roulette.title">Vòng quay dải màu</h2>
          <p class="tc-muted text-sm mt-1" data-i18n="roulette.desc">Chọn ngẫu nhiên một bộ màu nhấn để khám phá nhanh.</p>
        </div>
      </div>
      <div class="tc-card p-6 md:p-8">
        <div class="flex flex-wrap items-center gap-4">
          <div class="flex items-center gap-3">
            <div class="tc-preview-swatch" style="background: var(--a1);"></div>
            <div class="tc-preview-swatch" style="background: var(--a2);"></div>
            <div class="tc-preview-swatch" style="background: var(--a3);"></div>
          </div>
          <div class="flex flex-wrap gap-3">
            <button id="rouletteSpin" class="tc-btn tc-btn-primary px-4 py-2" data-i18n="roulette.spin">Quay màu</button>
            <button id="rouletteReset" class="tc-btn tc-chip px-4 py-2" data-i18n="roulette.reset">Đặt lại</button>
          </div>
        </div>
      </div>
    </section>

    <!-- FORGE -->
    <section class="max-w-6xl mx-auto px-4 pb-16">
      <div class="flex items-end justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold" data-i18n="forge.title">Lò rèn bảng màu</h2>
          <p class="tc-muted text-sm mt-1" data-i18n="forge.desc">Tuỳ chỉnh bộ màu nhấn để phù hợp với gu của bạn.</p>
        </div>
      </div>
      <div class="tc-card p-6 md:p-8 space-y-6">
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <div class="flex items-center justify-between gap-3">
            <div>
              <div class="text-sm font-semibold" data-i18n="forge.a1.label">Màu nhấn 1</div>
              <div class="tc-muted text-xs mt-1" data-accent-value="a1">--</div>
            </div>
            <input id="forgeA1" type="color" class="tc-color-input" value="#000000" aria-label="Màu nhấn 1">
          </div>
          <div class="flex items-center justify-between gap-3">
            <div>
              <div class="text-sm font-semibold" data-i18n="forge.a2.label">Màu nhấn 2</div>
              <div class="tc-muted text-xs mt-1" data-accent-value="a2">--</div>
            </div>
            <input id="forgeA2" type="color" class="tc-color-input" value="#000000" aria-label="Màu nhấn 2">
          </div>
          <div class="flex items-center justify-between gap-3">
            <div>
              <div class="text-sm font-semibold" data-i18n="forge.a3.label">Màu nhấn 3</div>
              <div class="tc-muted text-xs mt-1" data-accent-value="a3">--</div>
            </div>
            <input id="forgeA3" type="color" class="tc-color-input" value="#000000" aria-label="Màu nhấn 3">
          </div>
        </div>
        <div>
          <div class="text-sm font-semibold mb-2" data-i18n="forge.preview">Xem trước gradient</div>
          <div id="forgePreview" class="tc-gradient-preview"></div>
        </div>
        <div class="flex flex-wrap gap-3">
          <button id="forgeCopy" class="tc-btn tc-chip px-4 py-2" data-i18n="forge.copy">Sao chép CSS</button>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section class="max-w-6xl mx-auto px-4 pb-16">
      <div class="flex items-end justify-between mb-6">
        <div>
          <h2 class="text-2xl font-semibold" data-i18n="gallery.title">Bộ sưu tập sắc thái</h2>
          <p class="tc-muted text-sm mt-1" data-i18n="gallery.desc">8 sắc thái cảm giác.</p>
        </div>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" data-world-grid="1">
        <div class="tc-card p-5" data-world-card="1" data-world="nebula" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Tinh vân">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="nebula">Tinh vân</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="nebula">Tinh vân huyền ảo, ánh tím xanh sâu thẳm.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="ocean" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Đại dương">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="ocean">Đại dương</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="ocean">Đại dương mát lành, cảm giác sáng sạch.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="ink" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Mực tàu">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="ink">Mực tàu</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="ink">Tối giản, mực tàu và độ sâu.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="origami" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Origami">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="origami">Origami</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="origami">Giấy gấp, ấm áp và nhẹ nhàng.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="arcade" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Arcade">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="arcade">Arcade</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="arcade">Nê-on năng lượng, nhịp nhanh.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="dunes" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Đồi cát">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="dunes">Đồi cát</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="dunes">Sa mạc, nắng vàng, yên tĩnh.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="chrome" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Chrome">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="chrome">Chrome</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="chrome">Kim loại sáng, chuẩn xác, sạch.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
        <div class="tc-card p-5" data-world-card="1" data-world="circuit" role="button" tabindex="0" aria-label="Kích hoạt Thế giới: Mạch điện">
          <div class="flex items-center gap-2">
            <span class="tc-dot"></span>
            <h3 class="font-semibold" data-world-label="circuit">Mạch điện</h3>
          </div>
          <p class="tc-muted text-sm mt-2" data-world-desc="circuit">Mạch điện, xanh lục kỹ thuật.</p>
          <span class="text-xs mt-4 inline-block tc-muted" data-i18n="gallery.activate">Kích hoạt</span>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="max-w-6xl mx-auto px-4 pb-10">
    <div class="tc-card p-4 text-sm tc-muted flex items-center justify-between">
      <span data-i18n="footer.left">8Portal v4 — Khung A1→A3</span>
      <span data-i18n="footer.right">Token thế giới đã sẵn sàng</span>
    </div>
  </footer>

  <script src="./i18n.js"></script>
  <script type="module" src="./auth.js"></script>
  
  
  
  
  
  <script>
    (() => {
      const root = document.documentElement;
      const spinBtn = document.getElementById("rouletteSpin");
      const resetBtn = document.getElementById("rouletteReset");
      const inputA1 = document.getElementById("forgeA1");
      const inputA2 = document.getElementById("forgeA2");
      const inputA3 = document.getElementById("forgeA3");
      const copyBtn = document.getElementById("forgeCopy");
      const valueEls = {
        a1: document.querySelector('[data-accent-value="a1"]'),
        a2: document.querySelector('[data-accent-value="a2"]'),
        a3: document.querySelector('[data-accent-value="a3"]')
      };
      if (!spinBtn || !resetBtn || !inputA1 || !inputA2 || !inputA3 || !copyBtn) return;

      const presets = [
        ["#ff6b6b", "#ffd166", "#6ee7b7"],
        ["#60a5fa", "#a78bfa", "#f472b6"],
        ["#22c55e", "#84cc16", "#14b8a6"],
        ["#f97316", "#facc15", "#fb7185"],
        ["#38bdf8", "#0ea5e9", "#6366f1"],
        ["#f59e0b", "#ef4444", "#fb7185"],
        ["#2dd4bf", "#60a5fa", "#a78bfa"]
      ];

      const setAccent = (a1, a2, a3) => {
        root.style.setProperty("--a1", a1);
        root.style.setProperty("--a2", a2);
        root.style.setProperty("--a3", a3);
      };

      const resetAccent = () => {
        root.style.removeProperty("--a1");
        root.style.removeProperty("--a2");
        root.style.removeProperty("--a3");
      };

      const parseRgb = (value) => {
        const match = value.replace(/\s+/g, "").match(/^rgba?\((\d+),(\d+),(\d+)/i);
        if (!match) return null;
        const r = Number(match[1]);
        const g = Number(match[2]);
        const b = Number(match[3]);
        if ([r, g, b].some((v) => Number.isNaN(v))) return null;
        return [r, g, b];
      };

      const toHex = (value) => {
        if (!value) return "#000000";
        const raw = value.trim();
        if (raw.startsWith("#")) {
          if (raw.length === 4) {
            return "#" + raw.slice(1).split("").map((c) => c + c).join("");
          }
          if (raw.length === 7) return raw;
        }
        const rgb = parseRgb(raw);
        if (!rgb) return "#000000";
        return "#" + rgb.map((v) => v.toString(16).padStart(2, "0")).join("");
      };

      const getAccent = () => {
        const styles = getComputedStyle(root);
        return {
          a1: toHex(styles.getPropertyValue("--a1")),
          a2: toHex(styles.getPropertyValue("--a2")),
          a3: toHex(styles.getPropertyValue("--a3"))
        };
      };

      const refreshForgeUI = () => {
        const current = getAccent();
        inputA1.value = current.a1;
        inputA2.value = current.a2;
        inputA3.value = current.a3;
        if (valueEls.a1) valueEls.a1.textContent = current.a1.toUpperCase();
        if (valueEls.a2) valueEls.a2.textContent = current.a2.toUpperCase();
        if (valueEls.a3) valueEls.a3.textContent = current.a3.toUpperCase();
      };

      const ensureToast = () => {
        let toast = document.getElementById("tcToast");
        if (toast) return toast;
        toast = document.createElement("div");
        toast.id = "tcToast";
        toast.className = "tc-toast";
        toast.setAttribute("role", "status");
        toast.setAttribute("aria-live", "polite");
        document.body.appendChild(toast);
        return toast;
      };

      const showToast = (message) => {
        const toast = ensureToast();
        toast.textContent = "";
        window.clearTimeout(showToast._t);
        const raf = window.requestAnimationFrame || ((fn) => setTimeout(fn, 0));
        raf(() => {
          toast.textContent = message;
          toast.classList.add("is-visible");
          showToast._t = window.setTimeout(() => {
            toast.classList.remove("is-visible");
          }, 1400);
        });
      };

      const getCopyText = () => {
        const current = getAccent();
        return `--a1: ${current.a1};\n--a2: ${current.a2};\n--a3: ${current.a3};`;
      };

      const copyToClipboard = (text) => {
        if (navigator.clipboard && window.isSecureContext) {
          return navigator.clipboard.writeText(text);
        }
        return new Promise((resolve) => {
          const ta = document.createElement("textarea");
          ta.value = text;
          ta.style.position = "fixed";
          ta.style.opacity = "0";
          document.body.appendChild(ta);
          ta.select();
          try {
            document.execCommand("copy");
          } catch (err) {}
          ta.remove();
          resolve();
        });
      };

      spinBtn.addEventListener("click", () => {
        const preset = presets[Math.floor(Math.random() * presets.length)];
        if (!preset) return;
        setAccent(preset[0], preset[1], preset[2]);
        refreshForgeUI();
      });

      resetBtn.addEventListener("click", () => {
        resetAccent();
        refreshForgeUI();
      });

      const onForgeInput = () => {
        setAccent(inputA1.value, inputA2.value, inputA3.value);
        refreshForgeUI();
      };
      inputA1.addEventListener("input", onForgeInput);
      inputA2.addEventListener("input", onForgeInput);
      inputA3.addEventListener("input", onForgeInput);

      copyBtn.addEventListener("click", () => {
        const messageNode = document.querySelector('[data-i18n="toast.copied"]');
        const message = messageNode ? messageNode.textContent : "Đã sao chép!";
        copyToClipboard(getCopyText()).then(() => showToast(message));
      });

      refreshForgeUI();
    })();
  </script>
  <script src="./quick_actions.js"></script>
  <span class="sr-only" data-i18n="toast.copied">Đã sao chép!</span>

<script type="module" src="./scripts/hex_hub.js"></script>
  <script src="./scripts/topbar_render.js" defer></script>
  <script src="./scripts/topbar_behavior.js" defer></script>
</body>
</html>

