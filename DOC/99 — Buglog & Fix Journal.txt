# 99 — Buglog & Fix Journal

## Template
- ID:
- Ngày:
- Màn hình/World:
- Triệu chứng (Actual):
- Kỳ vọng (Expected):
- Console/Stack:
- Root cause:
- Fix (minimal diff):
- Regression steps:
- Trạng thái:

---

## BUG-2025-12-29-01 — Click “Tìm màu chỉ gần nhất” không ra kết quả (t is not a function)
- ID: BUG-2025-12-29-01
- Ngày: 2025-12-29
- Màn hình/World: World 1 — ThreadColor (worlds/threadcolor.html)
- Triệu chứng (Actual): Click nút tìm kiếm, không render kết quả.
- Kỳ vọng (Expected): Render danh sách kết quả hoặc thông báo fallback.
- Console/Stack: Uncaught TypeError: t is not a function tại renderColorCard → items.map → renderGroupedResults → showGroupedResults → runSearch
- Root cause: Shadow biến `t` (item kết quả) đè lên hàm i18n `t()`; trong renderColorCard dùng `t.hex` nhưng lại gọi `t("...")`.
- Fix (minimal diff):
  - Đổi renderColorCard(t, chosenHex) → renderColorCard(item, chosenHex)
  - Đổi items.map(t => ...) → items.map(item => ...)
  - Đảm bảo chỗ gọi t("...") là hàm i18n global.
- Regression steps:
  - Nhập/chọn màu + chọn hãng → click tìm kiếm → có kết quả; Console sạch.
- Trạng thái: OPEN (chờ Codex fix + verify)
