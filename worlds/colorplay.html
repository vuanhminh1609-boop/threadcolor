<!DOCTYPE html>
<html lang="vi" data-world="arcade" data-page="colorplay">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thế giới trò chơi màu</title>
  <link rel="stylesheet" href="../assets/dist/tailwind.css">
  <link rel="stylesheet" href="../assets/tones.css">
  <link rel="stylesheet" href="../assets/site_base.css">
  <link rel="stylesheet" href="../assets/topbar_overrides.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html, body, button, input, select, textarea {
      font-family: "Inter", "Noto Sans", system-ui, -apple-system, "Segoe UI", sans-serif;
    }
    .tc-colorplay-daily {
      display: grid;
      gap: 0.5rem;
      padding: 0.75rem;
      border-radius: 1rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(255, 255, 255, 0.6);
    }
    .tc-colorplay-daily-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .tc-colorplay-daily-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
      font-size: 0.75rem;
    }
    .tc-colorplay-hint {
      outline: 2px dashed rgba(56, 189, 248, 0.55);
      outline-offset: 2px;
    }
    .tc-colorplay-hint.is-hint-from {
      outline-color: rgba(34, 197, 94, 0.7);
    }
    .tc-colorplay-hint.is-hint-to {
      outline-color: rgba(244, 63, 94, 0.75);
    }
    .tc-achievement-grid {
      display: grid;
      gap: 0.75rem;
    }
    .tc-achievement-card {
      padding: 0.75rem;
      border-radius: 1rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(255, 255, 255, 0.6);
      display: grid;
      gap: 0.35rem;
    }
    .tc-achievement-card.is-locked {
      opacity: 0.6;
    }
    .tc-achievement-title {
      font-weight: 600;
      font-size: 0.85rem;
    }
    .tc-achievement-meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      font-size: 0.7rem;
    }
    @media (min-width: 768px) {
      .tc-achievement-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    .tc-game-thumb-sudoku {
      background:
        linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(59, 130, 246, 0.25)),
        repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2) 6px, transparent 6px, transparent 12px),
        repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2) 6px, transparent 6px, transparent 12px);
      border-radius: 16px;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }
    .tc-sudoku-game {
      display: grid;
      gap: 1rem;
    }
    .tc-sudoku-hud {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: center;
      justify-content: space-between;
    }
    .tc-sudoku-metrics {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .tc-sudoku-metric {
      padding: 0.5rem 0.75rem;
      border-radius: 0.75rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(255, 255, 255, 0.6);
      display: grid;
      gap: 0.2rem;
      min-width: 90px;
    }
    .tc-sudoku-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }
    .tc-sudoku-board {
      display: grid;
      grid-template-columns: repeat(9, minmax(0, 1fr));
      gap: 2px;
      padding: 6px;
      border-radius: 1rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      background: rgba(15, 23, 42, 0.4);
      max-width: 520px;
      width: 100%;
      margin: 0 auto;
    }
    .tc-sudoku-cell {
      aspect-ratio: 1 / 1;
      border-radius: 0.65rem;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(255, 255, 255, 0.12);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
      color: #0f172a;
      cursor: pointer;
      transition: transform 0.08s ease, border-color 0.12s ease;
    }
    .tc-sudoku-cell.is-given {
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.5);
    }
    .tc-sudoku-cell.is-conflict {
      border-color: rgba(248, 113, 113, 0.9);
      box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.65) inset;
    }
    .tc-sudoku-cell.block-right {
      box-shadow: inset -2px 0 0 rgba(148, 163, 184, 0.6);
    }
    .tc-sudoku-cell.block-bottom {
      box-shadow: inset 0 -2px 0 rgba(148, 163, 184, 0.6);
    }
    .tc-sudoku-cell.block-right.block-bottom {
      box-shadow:
        inset -2px 0 0 rgba(148, 163, 184, 0.6),
        inset 0 -2px 0 rgba(148, 163, 184, 0.6);
    }
    .tc-sudoku-cell.is-selected {
      transform: scale(0.98);
      border-color: rgba(56, 189, 248, 0.8);
    }
    .tc-sudoku-palette {
      display: grid;
      grid-template-columns: repeat(9, minmax(0, 1fr));
      gap: 0.4rem;
      max-width: 520px;
      width: 100%;
      margin: 0 auto;
    }
    .tc-sudoku-color {
      aspect-ratio: 1 / 1;
      border-radius: 0.75rem;
      border: 1px solid rgba(148, 163, 184, 0.35);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      display: grid;
      place-items: center;
      font-size: 0.75rem;
      font-weight: 700;
    }
    .tc-sudoku-color.is-active::after {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: 0.6rem;
      border: 2px solid rgba(255, 255, 255, 0.85);
      box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.35);
    }
    .tc-sudoku-status {
      text-align: center;
    }
    .tc-sudoku-toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.75rem;
    }
    @media (max-width: 640px) {
      .tc-sudoku-controls {
        width: 100%;
      }
    }
  </style>
</head>
<body class="font-sans">
  <div id="tcTopbarMount"></div>

  <main class="mx-auto max-w-6xl px-4 pt-10 pb-16">
    <section class="tc-card p-6 md:p-8">
      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div>
          <h1 class="text-3xl md:text-4xl font-bold">Thế giới trò chơi màu</h1>
          <p class="mt-2 tc-muted">Sảnh game gọn gàng, chọn nhanh trò chơi màu bạn muốn.</p>
        </div>
        <div class="inline-flex items-center gap-2 tc-chip px-3 py-2 rounded-full text-xs">
          <span class="tc-dot" aria-hidden="true"></span>
          <span>Chế độ thử nghiệm · Đang hoàn thiện</span>
        </div>
      </div>

      <div class="mt-6 tc-game-lobby">
        <div class="tc-card tc-game-card is-open" data-game-card="line98" aria-expanded="true">
          <div class="tc-game-card-head">
            <div class="tc-game-card-meta">
              <div class="tc-game-thumb tc-game-thumb-line98" aria-hidden="true"></div>
              <div>
                <p class="tc-game-card-title">Game 1: Line 98</p>
                <p class="tc-muted text-xs mt-1">Xếp bi 5+ cùng màu để xoá và ghi điểm.</p>
                <div class="tc-game-card-stats">
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Kỷ lục</span>
                    <strong data-game-best="line98">0</strong>
                  </div>
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Ván gần nhất</span>
                    <span data-game-last="line98" class="tc-muted text-xs">--</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="tc-game-card-actions">
              <button class="tc-btn tc-chip px-3 py-2 text-xs tc-game-resume is-hidden" type="button" data-game-action="resume" data-game="line98" aria-label="Tiếp tục">Tiếp tục</button>
              <button class="tc-icon-btn tc-game-play" type="button" data-game-action="open" data-game="line98" data-tooltip="Chơi ngay" aria-label="Chơi ngay">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M8 6l10 6-10 6z" fill="currentColor"></path>
                </svg>
              </button>
              <button class="tc-icon-btn tc-game-fullscreen" type="button" data-game-action="fullscreen" data-game="line98" data-tooltip="Toàn màn hình" aria-label="Toàn màn hình">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M4 9V4h5M15 4h5v5M20 15v5h-5M9 20H4v-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="tc-game-card-body">
            <div class="tc-game-card-body-inner" data-game-mount="line98"></div>
          </div>
        </div>

        <div class="tc-card tc-game-card" data-game-card="pillstack" aria-expanded="false">
          <div class="tc-game-card-head">
            <div class="tc-game-card-meta">
              <div class="tc-game-thumb tc-game-thumb-pill" aria-hidden="true"></div>
              <div>
                <p class="tc-game-card-title">Game 2: Xếp thuốc</p>
                <p class="tc-muted text-xs mt-1">Ghép 4+ ô cùng màu để xoá và ghi điểm.</p>
                <div class="tc-game-card-stats">
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Kỷ lục</span>
                    <strong data-game-best="pillstack">0</strong>
                  </div>
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Ván gần nhất</span>
                    <span data-game-last="pillstack" class="tc-muted text-xs">--</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="tc-game-card-actions">
              <button class="tc-btn tc-chip px-3 py-2 text-xs tc-game-resume is-hidden" type="button" data-game-action="resume" data-game="pillstack" aria-label="Tiếp tục">Tiếp tục</button>
              <button class="tc-icon-btn tc-game-play" type="button" data-game-action="open" data-game="pillstack" data-tooltip="Chơi ngay" aria-label="Chơi ngay">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M8 6l10 6-10 6z" fill="currentColor"></path>
                </svg>
              </button>
              <button class="tc-icon-btn tc-game-fullscreen" type="button" data-game-action="fullscreen" data-game="pillstack" data-tooltip="Toàn màn hình" aria-label="Toàn màn hình">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M4 9V4h5M15 4h5v5M20 15v5h-5M9 20H4v-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="tc-game-card-body">
            <div class="tc-game-card-body-inner" data-game-mount="pillstack"></div>
          </div>
        </div>

        <div class="tc-card tc-game-card" data-game-card="colorsudoku" aria-expanded="false">
          <div class="tc-game-card-head">
            <div class="tc-game-card-meta">
              <div class="tc-game-thumb tc-game-thumb-sudoku" aria-hidden="true"></div>
              <div>
                <p class="tc-game-card-title">Game 3: Sudoku màu</p>
                <p class="tc-muted text-xs mt-1">Điền 9 màu vào lưới 9×9. Mỗi hàng/cột/khối 3×3 không trùng màu.</p>
                <div class="tc-game-card-stats">
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Kỷ lục</span>
                    <strong data-game-best="colorsudoku">0</strong>
                  </div>
                  <div class="tc-game-card-stat">
                    <span class="tc-muted text-[10px] uppercase tracking-[0.2em]">Ván gần nhất</span>
                    <span data-game-last="colorsudoku" class="tc-muted text-xs">--</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="tc-game-card-actions">
              <button class="tc-btn tc-chip px-3 py-2 text-xs tc-game-resume is-hidden" type="button" data-game-action="resume" data-game="colorsudoku" aria-label="Tiếp tục">Tiếp tục</button>
              <button class="tc-icon-btn tc-game-play" type="button" data-game-action="open" data-game="colorsudoku" data-tooltip="Chơi ngay" aria-label="Chơi ngay">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M8 6l10 6-10 6z" fill="currentColor"></path>
                </svg>
              </button>
              <button class="tc-icon-btn tc-game-fullscreen" type="button" data-game-action="fullscreen" data-game="colorsudoku" data-tooltip="Toàn màn hình" aria-label="Toàn màn hình">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M4 9V4h5M15 4h5v5M20 15v5h-5M9 20H4v-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </button>
            </div>
          </div>
          <div class="tc-game-card-body">
            <div class="tc-game-card-body-inner" data-game-mount="colorsudoku"></div>
          </div>
        </div>
      </div>

      <details class="tc-card mt-6 p-4">
        <summary class="cursor-pointer font-semibold">Thành tựu & nhiệm vụ nhẹ</summary>
        <p class="tc-muted text-xs mt-2">Mở khoá khi chơi offline, không cần đăng nhập.</p>
        <div id="colorplayAchievementList" class="tc-achievement-grid mt-4"></div>
      </details>
    </section>
  </main>

  <script type="module" src="../auth.js"></script>
  <script type="module" src="../scripts/workbench_bridge.js"></script>
  <script type="module" src="./colorplay.js"></script>
  <script src="../scripts/topbar_render.js" defer></script>
  <script src="../scripts/topbar_behavior.js" defer></script>
</body>
</html>
